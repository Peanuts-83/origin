(window.promotopbannerWebpackJsonp=window.promotopbannerWebpackJsonp||[]).push([[0],{175:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return p}));n(154),n(210),n(69),n(67),n(91),n(176),n(159),n(155),n(156),n(157),n(44),n(211),n(212),n(68);var r=n(158),a=n(60);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var i=function(t,n){return t&&n?function(t,n){var r=e.env[t];return void 0===r||""===r?null:r.match(/^https?:/)?"".concat(r).concat(n):"https://".concat(r).concat(n)}("INFRA_KONG_API_ADDR","/api/v4/categories/".concat(t,"?platform=").concat(n.toUpperCase())):null},u=function(e,t,n,r){if(!e||!t||!n)return null;var c,o=t.toUpperCase(),i=a.c[o],u=i?e.replace(".com",i):e,p="https://".concat(u,"/api/v1/campaigns"),s=(c=r,Object.keys(c).map((function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(c[e]))})).join("&")),l=s?"?".concat(s):"";return"".concat(p,"/").concat(o,"/").concat(n,"/").concat("top_banner").concat(l)},p=function(e,t,n,r){var a={};if(e&&(a.page_name=e),n&&(a.user_id=n),void 0!==r&&(a.new_user=r),t){var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e[0],n=e[1];return o(o(o(o({},t&&t.id&&{level_0_id:t.id}),t&&t.name&&{level_0_name:t.name}),n&&n.id&&{level_1_id:n.id}),n&&n.name&&{level_1_name:n.name})}(t);a=o(o({},a),c)}return a}}).call(this,n(66))},187:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return u}));n(154),n(69),n(67),n(155),n(156),n(157),n(68);var r=n(158),a=n(188);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var i=n.n(a).a.create({baseURL:e.env.API_URL||"",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}}),u=function(e){var t=e.url,n=e.method,r=e.data,a=e.headers,c=e.timeout;return i.request(t,o({method:n,headers:o({},a),body:JSON.stringify(r)},c&&{timeout:c}))}}).call(this,n(66))},205:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return u}));n(171),n(174);var r=n(175),a="topbanner/GET_TOPBANNER_SUCCESS",c="topbanner/GET_TOPBANNER_FAILURE",o=function(e){var t=e.content[0];return{type:a,payload:{campaign:t}}},i=function(){return{type:c}},u=function(t,n,a,c,u,p,s){var l=Object(r.c)(c,u,p,s),f=Object(r.b)(t,n,a,l);return f?{payload:{url:f,method:"GET",onSuccess:o,onFailure:i,timeout:Number.parseInt(e.env.TOPBANNER_TIMEOUT,10)||2e3}}:{}}}).call(this,n(66))},213:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));n(171),n(174);var r=n(175),a="topbanner/GET_ANESTORS_SUCCESS",c=function(e){var t=e.content.ancestors||[];return{type:a,payload:{ancestors:t}}},o=function(t,n){var a=Object(r.a)(t,n);return a?{payload:{url:a,method:"GET",onSuccess:c,timeout:Number.parseInt(e.env.TOPBANNER_TIMEOUT,10)||2e3}}:{}}}).call(this,n(66))},215:function(e,t,n){e.exports={wrapper:"_1kJ1aZQVWkBHwgoJ","wrapper--collapsed":"ZIsciA7S-69X6R_3"}},216:function(e,t,n){"use strict";n.r(t);var r=n(131),a=n.n(r),c=(n(159),n(61)),o=(n(154),n(69),n(67),n(155),n(156),n(157),n(68),n(158)),i=(n(180),n(181)),u=n.n(i),p=n(60),s=(u.a.exact({campaign:u.a.shape({uuid:u.a.string,name:u.a.string,redirectionUrl:u.a.string,creativeDesktop:u.a.shape({url:u.a.string,width:u.a.number,height:u.a.number}),creativeMobile:u.a.shape({url:u.a.string,width:u.a.number,height:u.a.number})}),platform:u.a.oneOf(Object.values(p.b)),spaceSlug:u.a.string,isB2B:u.a.bool,userId:u.a.number,browserAPI:u.a.string,pageName:u.a.string,categoryId:u.a.number,ancestors:u.a.arrayOf(u.a.shape({})),hasTopbannerBeenFetched:u.a.bool,market:u.a.string}),u.a.exact({messages:u.a.object,addLocaleData:u.a.func.isRequired,locale:u.a.oneOf(Object.values(p.a))}),function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,r=arguments.length>1?arguments[1]:void 0;return t[r.type]?t[r.type](n,r):n}}),l=(n(79),n(81),n(184),n(62)),f=n(185),b={timestamp:function(){return',"time":"'.concat((new Date).toISOString(),'"')},messageKey:"message",useLevelLabels:!0},d=n.n(f)()(b),O=n(187),m=function(e){return"undefined"!==typeof e},v=function(e,t){if(!t.payload)return Promise.resolve({});var n=t.payload,r=n.onSuccess,a=n.onFailure,c=n.onApiStart,o=n.onApiEnd,i=Object(l.a)(n,["onSuccess","onFailure","onApiStart","onApiEnd"]),u=Object(O.a)(i);return m(c)&&e(c()),u.then((function(t){return e(r(t.data,t))})).catch((function(t){if(m(a)){var n=a(t);if(n)return e(n)}d.warn("Failed to perform query ".concat(t))})).finally((function(){m(o)&&e(o())}))},g=n(205),y=n(213),h=function(e){return{uuid:e.campaign_uuid,name:e.name,redirectionUrl:e.redirection_url,creativeDesktop:{url:e.creative_desktop?e.creative_desktop.url:"",width:e.creative_desktop?e.creative_desktop.width:0,height:e.creative_desktop?e.creative_desktop.height:0},creativeMobile:{url:e.creative_mobile?e.creative_mobile.url:"",width:e.creative_mobile?e.creative_mobile.width:0,height:e.creative_mobile?e.creative_mobile.height:0}}};n(176);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _,P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.map((function(e){return w({id:e.id},e.platforms&&e.platforms[t]&&{name:e.platforms[t].name})}))};function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D={campaign:{},platform:p.b.FRANCE,spaceSlug:"top_banner",isB2B:!1,categoryId:null,ancestors:[],hasTopbannerBeenFetched:!1,userId:null},k=function(e,t,n,r,a,c,o){return function(i){return v(i,Object(g.c)(e,t,n,r,a,c,o))}},T=s(D,(_={},Object(o.a)(_,g.b,(function(e,t){var n=t.payload.campaign;return S(S({},e),{},{campaign:n?h(n):{},hasTopbannerBeenFetched:!0})})),Object(o.a)(_,g.a,(function(e){return S(S({},e),{},{hasTopbannerBeenFetched:!0})})),Object(o.a)(_,y.a,(function(e,t){var n=t.payload.ancestors;return S(S({},e),{},{ancestors:n?P(n,e.platform.toUpperCase()):[]})})),_));function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=Object(r.createContext)(),R=function(e){var t=e.initialState,n=e.children,o=Object(r.useReducer)(T,t),i=Object(c.a)(o,2),u=i[0],p=i[1],s=u.browserAPI,l=u.hasTopbannerBeenFetched;return a.a.createElement(A.Provider,{value:I(I({},u),{},{getTopbanner:function(e,t,n,r,a,c){l||k(s,e,t,n,r,a,c)(p)}})},a.a.createElement("div",{style:{boxShadow:"inset 0 -1px 0 0 #ECEDF0"}},n))},U=(n(132),"undefined"!==typeof window&&window.manomano||{}),C=function(){},B=function(){var e="undefined"!==typeof window&&window.dataLayer,t=Object(r.useCallback)((function(t){return e.push(t)}),[e]);return[e?t:C]},F=function(){return!(!U.isNewUser||"function"!==typeof U.isNewUser)&&U.isNewUser()},x=n(214),L=n.n(x),W=n(215),G=n.n(W),M=function(){var e=Object(r.useContext)(A),t=e.campaign,n=(t=void 0===t?{}:t).creativeDesktop,o=void 0===n?{}:n,i=t.creativeMobile,u=void 0===i?{}:i,p=t.redirectionUrl,s=t.name,l=t.uuid,f=e.platform,b=e.market,d=e.pageName,O=e.ancestors,m=e.getTopbanner,v=e.hasTopbannerBeenFetched,g=e.userId,y=B(),h=Object(c.a)(y,1)[0],j=F(),w="undefined"!==typeof window&&window.innerWidth&&window.innerWidth<1e3?!!u.url:!!("undefined"!==typeof window&&window.innerWidth&&window.innerWidth>=1e3)&&!!o.url,_=v&&!w,P=Object(r.useState)(!1),E=Object(c.a)(P,2),S=E[0],D=E[1];Object(r.useEffect)((function(){m(f,b,d,O,g,j)}),[]),Object(r.useEffect)((function(){h&&s&&l&&w&&!S&&(D(!0),setTimeout((function(){return h({event:"display_campaign",campaign_id:l,campaign_name:s,space_slug:"top_banner"})}),2e3))}),[h,s,l,S]);var k=Object(r.useCallback)((function(){h&&h({event:"click_campaign",campaign_id:l,campaign_name:s,space_slug:"top_banner"})}),[h,l,s]);return a.a.createElement("div",{className:L()(G.a.wrapper,_?G.a["wrapper--collapsed"]:"")},a.a.createElement("a",{href:p,onClick:k},w?a.a.createElement("picture",null,a.a.createElement("source",{media:"(max-width: 767px)",srcSet:u.url}),a.a.createElement("img",{src:o.url,alt:""})):null))};M.displayName="Banner";var q=M,J=function(e){var t=e.state;return a.a.createElement(R,{initialState:t},a.a.createElement(q,null))};t.default=J}}]);
//# sourceMappingURL=app.2e073d2f.js.map